<html style="font-size: 10px; font-family: Roboto, Arial, sans-serif" dark="">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=windows-1252" />
    <meta http-equiv="Cache-control" content="no-cache" />
    <title>Reza | Youtube LIve Chat</title>

    <!-- Stylesheet -->
    <link rel="stylesheet" type="text/css" href="src/css/yt-original.css" />
    <link rel="stylesheet" type="text/css" href="src/css/main.css" />
    <link rel="stylesheet" href="src/css/ctp-mocha.css" />

    <!-- Code mirror for css editor -->
    <!-- CodeMirror CSS -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css"
    />

    <!-- Theme CSS (optional, choose your favorite theme) -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/material.min.css"
    />

    <!-- Linting CSS -->
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/addon/lint/css-lint.min.js"
      integrity="sha512-uvP6cZWrrQc4b+sluLwMcjWPDC/2oJMGAmCGJYqYbC/uBR74PAd/GRZ4nMoTfczKoRZOHkUbwHHugQBYVQQM4A=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/csslint/1.0.5/csslint.min.js"></script>
    <!-- Autocomplete CSS -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/hint/show-hint.min.css"
    />

    <!-- components and Assets -->
    <script src="src/js/components/RenderButton.js"></script>
    <script src="src/js/components/ImageAssets.js"></script>
    <!-- Data -->
    <script src="src/js/ChatsData/GeneralChats.js"></script>
    <script src="src/js/ChatsData/SuperchatEvent.js"></script>
    <script src="src/js/ChatsData/MembershipEvent.js"></script>
    <script src="src/js/ChatsData/MembergiftEvent.js"></script>
    <script src="src/js/ChatsData/SuperSticker.js"></script>
    <!-- Core Functions -->
    <script type="text/javascript" src="src/js/jQuery.js"></script>
    <script src="src/js/RenderChats.js"></script>
    <style>
      body {
        color: #000;
        padding: 0 !important;
        background: #252432;
        margin: 0;
        overflow-y: scroll;
        overflow: hidden;
      }
      yt-live-chat-text-message-renderer:hover {
        background: unset !important;
      }
      body.autoscroll {
        overflow-y: auto;
      }

      body.no-scroll {
        overflow: hidden;
      }

      body.no-y-scroll {
        overflow-y: hidden;
      }

      .hidden {
        display: none;
      }

      textarea {
        --paper-input-container-input_-_white-space: pre-wrap;
      }

      .grecaptcha-badge {
        visibility: hidden;
      }

      yt-live-chat-renderer {
        height: 100vh;
        align-content: flex-end;
        background-color: transparent;
      }

      yt-live-chat-text-message-renderer[author-is-owner] {
        background-color: transparent;
      }

      yt-live-chat-renderer #contents {
        align-content: flex-end;
        flex-direction: column-reverse !important;
      }

      yt-live-chat-renderer #menu {
        display: none;
      }

      #items.yt-live-chat-item-list-renderer {
        flex: none !important;
      }

      div#menu {
        display: none !important;
      }

      .general-rz-class {
        color: #000;
        display: flex !important;
        flex-direction: row !important;
      }
      .button {
        margin-bottom: 10px;
      }

      .toggle-buttons {
        display: none;
      }
      a {
        color: inherit !important;
      }

      #custom-css-input {
        background-color: var(--dark);
        color: white;
        flex-grow: 1;
        width: 100%;
        height: calc(100% - 50px);
        font-family: monospace;
        margin-bottom: 10px;
      }
      #reset-css-btn,
      #update-css-btn {
        width: 100%;
        padding: 10px;
        color: white;
        border: none;
        cursor: pointer;
        background-color: var(--main);
      }
      #reset-css-btn {
        background-color: var(--secondary);
      }
      #custom-style-output {
        display: none;
      }
      body {
        margin: 0;
        display: flex;
        height: 100vh;
        overflow: hidden;
      }

      yt-live-chat-app {
        width: 100%;
        min-width: 500px;
        position: relative;
      }

      #css-editor-wrapper {
        display: none;
        flex-direction: column !important;
        width: 500px;
      }

      yt-live-chat-app::after {
        content: "";
        width: 10px;
        height: 100%;
        position: absolute;
        right: -5px;
        top: 0;
        cursor: col-resize;
      }
      .CodeMirror-hints {
        background-color: var(--dark);
        font-family: monospace;
        font-size: 14px;
        color: #cdd6f4 !important;
        max-height: 200px;
        overflow-y: auto;
        border-radius: 6px;
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
        padding: 4px 0;
        z-index: 10000;
      }

      .CodeMirror-hint {
        padding: 4px 12px;
        white-space: pre;
        color: #cdd6f4 !important;
      }

      .CodeMirror-hint:hover {
        background-color: #313244;
        cursor: pointer;
      }
      .CodeMirror-hint-active {
        background-color: #89b4fa;
        color: #1e1e2e !important;
      }
      .CodeMirror {
        border: 1px solid #ccc;
        height: calc(100vh - 35px);
        max-height: 100vh;
        min-width: 500px !important;
        font-size: 14px !important;
        flex-grow: 1 !important;
        min-height: 150px;
      }
      .CodeMirror-scroll {
        overflow-y: auto !important;
        overflow-x: auto !important;
      }
    </style>
  </head>

  <body class="general-rz-class">
    <yt-live-chat-app>
      <yt-live-chat-renderer
        class="style-scope yt-live-chat-app"
        hide-timestamps=""
        has-ticker=""
        has-input-action-panel=""
        style="--scrollbar-width: 15px"
      >
        <yt-live-chat-item-list-renderer
          class="style-scope yt-live-chat-renderer"
        >
          <div
            id="contents"
            class="style-scope yt-live-chat-item-list-renderer"
            style="display: flex; flex-direction: column-reverse !important"
          >
            <div
              id="items"
              class="style-scope yt-live-chat-item-list-renderer"
              style="transform: translateY(-40px)"
            ></div>
            <div
              id="render-chat-buttons"
              class="renderBtn"
              style="
                display: flex;
                flex-direction: row;
                justify-content: center;
              "
            ></div>
          </div>
        </yt-live-chat-item-list-renderer>
      </yt-live-chat-renderer>
    </yt-live-chat-app>
    <div id="css-editor-wrapper">
      <textarea id="css-editor"> </textarea>
      <div
        style="
          display: flex;
          flex-direction: row !important;
          gap: 5px;
          background: #252432;
        "
      >
        <button id="download-css-btn" class="btn">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="lucide lucide-download-icon lucide-download"
          >
            <path d="M12 15V3" />
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
            <path d="m7 10 5 5 5-5" />
          </svg>
        </button>
        <button id="update-css-btn">Update CSS</button>
        <button id="reset-css-btn">Reset CSS</button>
      </div>
    </div>

    <style id="custom-style-output"></style>
  </body>
  <script>
    const intro = `
=====================================
    /* PLEASE READ !!!!!!!!!!! */
=====================================

.updates-log {
  /* v4.0.4 */
  /* 29 June 2025 :
    - Save the CSS code to local storage when updateing
      (you won't lose your code when refreshing the page)
    - Add reset button
    - Add wrap toggle short cut
  */
}
.disclaimer {
  /* this is not afiliated with youtube */
  /* this website is to test your custom CSS for youtube livechat */
}

.available-shortcut {
   /* "Ctrl-Space": "auto complete", */
   /* "Ctrl-F": "find text",  */
   /* "Ctrl-shift-R": "find text and replace",  */
   /* "Ctrl-/": "toggle Comment",  */
   /* "Alt-Z": "toggle Wrap text",  */
}

/* [!] add background color to body to change the preview background (Development only,
       make Background transparent when you send to your client )  */
body {
    background: #252432 !important;
}
      `;
    $(document).ready(function () {
      // Load the saved CSS from localStorage

      const savedCSS = localStorage.getItem("rz-code-css");
      if (savedCSS) {
        editor.setValue(savedCSS);
        document.getElementById("custom-style-output").innerHTML = savedCSS;
      } else {
        // If no saved CSS, set the editor to the intro content
        editor.setValue(intro);
      }
      const container = $(".CodeMirror-scroll");
      container.scrollTop(container[0].scrollHeight);
    });

    function toggleButtons(buttonId) {
      var button = document.getElementById(buttonId);
      var toggleButtons = button.nextElementSibling;
      toggleButtons.style.display =
        toggleButtons.style.display === "none" ? "flex" : "none";
      var allToggleButtons = document.getElementsByClassName("toggle-buttons");
      for (var i = 0; i < allToggleButtons.length; i++) {
        if (allToggleButtons[i] !== toggleButtons) {
          allToggleButtons[i].style.display = "none";
        }
      }
    }
    $("#download-css-btn").on("click", function () {
      const content = editor.getValue();
      const blob = new Blob([content], { type: "text/css" });
      const url = URL.createObjectURL(blob);

      const a = document.createElement("a");
      a.href = url;
      a.download = "style.css";
      a.click();

      URL.revokeObjectURL(url);
    });
    $("#reset-css-btn").on("click", function () {
      localStorage.removeItem("rz-code-css"); // Clear the saved CSS from localStorage
      editor.setValue(intro);
      document.getElementById("custom-style-output").innerHTML = "";
      this.style.backgroundColor = "#ffafb8";
      this.style.color = "#6b3d42";
      this.innerText = "Code reset successfully";
      setTimeout(() => {
        this.style.backgroundColor = "";
        this.style.color = "";
        this.innerText = "Reset CSS";
      }, 2000);
    });

    $("#update-css-btn").on("click", function () {
      const container = $(".CodeMirror-scroll");
      const editorContent = editor.getValue(); // Get the content from the CodeMirror editor
      const customStyleOutput = document.getElementById("custom-style-output");
      // Clear the existing styles

      try {
        customStyleOutput.innerHTML = editorContent;
        localStorage.setItem("rz-code-css", editorContent);

        // Change the style of the btn for 2 seconds
        this.style.backgroundColor = "#B9FFAF";
        this.style.color = "#426B3D";
        this.innerText = "Code applied";
        setTimeout(() => {
          this.style.backgroundColor = "";
          this.style.color = "";
          this.innerText = "Update CSS";
        }, 2000);
      } catch (error) {
        console.error("Error updateing custom CSS:", error);
        alert("Invalid CSS. Please check your syntax.");
      }
    });

    const chatApp = document.querySelector("yt-live-chat-app");
    const editorWrapper = document.getElementById("css-editor-wrapper");

    let isDragging = false;

    chatApp.addEventListener("mousedown", (e) => {
      const bounds = chatApp.getBoundingClientRect();
      // Allow resize only if dragging near right edge
      if (e.clientX >= bounds.right - 10 && e.clientX <= bounds.right + 10) {
        isDragging = true;
        document.body.style.cursor = "col-resize";
        e.preventDefault();
      }
    });

    document.addEventListener("mousemove", (e) => {
      if (!isDragging) return;

      const containerWidth = window.innerWidth;
      const newWidth = (e.clientX / containerWidth) * 100;

      chatApp.style.width = `${newWidth}%`;
      editorWrapper.style.width = `${100 - newWidth}%`;
    });

    document.addEventListener("mouseup", () => {
      isDragging = false;
      document.body.style.cursor = "default";
    });
  </script>
  <!-- CodeMirror JavaScript -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
  <!-- CSS Mode -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/css/css.min.js"></script>
  <!-- Linting Addon -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/lint/lint.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/lint/css-lint.min.js"></script>
  <!-- Autocomplete Addon -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/hint/show-hint.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/hint/css-hint.min.js"></script>
  <!-- Search and Replace Addon -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/search/search.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/search/searchcursor.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/dialog/dialog.min.js"></script>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/dialog/dialog.min.css"
  />
  <!-- Auto Close Brackets Addon -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/edit/closebrackets.min.js"></script>
  <!-- Comment Addon -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/comment/comment.min.js"></script>

  <script>
    var editor = CodeMirror.fromTextArea(
      document.getElementById("css-editor"),
      {
        mode: "css", // Set the mode to CSS
        lineNumbers: true, // Show line numbers
        theme: "ctp-mocha", // Set cattpuccin mocha theme
        autoCloseBrackets: true, // Automatically close brackets
        matchBrackets: true, // Highlight matching brackets
        lineWrapping: true, // Enable line wrapping
        lint: true, // Enable linting (requires css-lint.js)
        gutters: ["CodeMirror-lint-markers"], // Add linting gutters
        extraKeys: {
          "Ctrl-Space": "autocomplete", // Enable autocomplete with Ctrl+Space
          "Ctrl-F": "findPersistent", // Enable search with Ctrl+F
          "Ctrl-/": "toggleComment", // Enable comment/uncomment with Ctrl+/
          "Alt-Z": function (cm) {
            const current = cm.getOption("lineWrapping");
            cm.setOption("lineWrapping", !current);
          },
        },
      }
    );

    $.fn.flattenJSON = function (obj, prefix = "", result = {}) {
      $.each(obj, function (key, value) {
        const prefixedKey = prefix ? `${prefix}${key}` : key;

        if (typeof value === "object" && value !== null && !$.isArray(value)) {
          $(this).flattenJSON(value, "", result);
        } else {
          result[prefixedKey] = value;
        }
      });
      return result;
    };

    function handleImport() {
      try {
        const rawInput = $("#jsonInput").val();
        const parsedJSON = JSON.parse(rawInput);

        const flatJSON = flattenJSON(parsedJSON);

        $.each(flatJSON, function (key, value) {
          localStorage.setItem(key, value);
        });

        alert("✅ JSON imported successfully!");
        location.reload();
      } catch (err) {
        alert("❌ Failed to import JSON. Please check formatting.");
        console.error(err);
      }
    }
  </script>
</html>
